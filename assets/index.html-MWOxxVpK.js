import{_ as t,c as o,a as e,b as n,e as a,d as l,w as i,r as c,o as u}from"./app-B0iwjKd7.js";const r={},d={class:"hint-container warning"};function m(k,s){const p=c("RouteLink");return u(),o("div",null,[s[6]||(s[6]=e(`<h1 id="üñºÔ∏è-use-media" tabindex="-1"><a class="header-anchor" href="#üñºÔ∏è-use-media"><span>üñºÔ∏è Use Media</span></a></h1><p>Camomilla has full media management. Everything is stored in the Media model.</p><p>To attach medias to a custom model just assign a ForeignKey or a ManyToMany relation.</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyModel</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    image <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">&quot;camomilla.Media&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span></span>
<span class="line">        null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span></span>
<span class="line">        on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>SET_NULL<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    gallery <span class="token operator">=</span> models<span class="token punctuation">.</span>ManyToManyField<span class="token punctuation">(</span><span class="token string">&quot;camomilla.Media&quot;</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Every media can be associated to a MediaFolder. The MediaFolder is a tree structure of folders (like a fs).</p><p>The media takes care of optimizing images. The optimization consists in a resize to a max width-height and to a DPI scaling. You can disable optimization or change sizes and dpi from settings:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line">CAMOMILLA <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;MEDIA&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;OPTIMIZE&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;MAX_WIDTH&quot;</span><span class="token punctuation">:</span> <span class="token number">1980</span><span class="token punctuation">,</span> <span class="token string">&quot;MAX_HEIGHT&quot;</span><span class="token punctuation">:</span> <span class="token number">1400</span><span class="token punctuation">,</span> <span class="token string">&quot;DPI&quot;</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">&quot;ENABLE&quot;</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Camomilla creates also image thumbnails. You can change, thumbnails size from settings:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line">CAMOMILLA <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;MEDIA&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string">&quot;THUMBNAIL&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;FOLDER&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;WIDTH&quot;</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token string">&quot;HEIGHT&quot;</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="üóÇÔ∏è-media-api" tabindex="-1"><a class="header-anchor" href="#üóÇÔ∏è-media-api"><span>üóÇÔ∏è Media API</span></a></h2><p>The media model has its own api methods to upload file.</p>`,11)),n("div",d,[s[5]||(s[5]=n("p",{class:"hint-container-title"},"‚ö†Ô∏è Beware!",-1)),n("p",null,[s[1]||(s[1]=a("Remember to add camomilla api url to your ",-1)),s[2]||(s[2]=n("code",null,"urlpatterns",-1)),s[3]||(s[3]=a(". You can find more info ",-1)),l(p,{to:"/How%20to/Use%20API/"},{default:i(()=>[...s[0]||(s[0]=[a("here",-1)])]),_:1}),s[4]||(s[4]=a(".",-1))])]),s[7]||(s[7]=e(`<h3 id="upload-new-media" tabindex="-1"><a class="header-anchor" href="#upload-new-media"><span>Upload new media</span></a></h3><p><strong>URL:</strong> <code>/api/camomilla/media</code> <strong>METHOD:</strong> <code>POST</code> <strong>MODE:</strong> <code>MultipartFormData</code></p><p><strong>PAYLOAD:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">alt_text: Text</span>
<span class="line">title: Text</span>
<span class="line">description: Text</span>
<span class="line">file: Multipart File</span>
<span class="line">folder: Folder id</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="update-existing-media" tabindex="-1"><a class="header-anchor" href="#update-existing-media"><span>Update existing media</span></a></h3><p><strong>URL:</strong> <code>/api/camomilla/media/&lt;media_id&gt;</code> <strong>METHOD:</strong> <code>PUT | PATCH</code> <strong>MODE:</strong> <code>MultipartFormData</code></p><p><strong>PAYLOAD:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">alt_text: Text</span>
<span class="line">title: Text</span>
<span class="line">description: Text</span>
<span class="line">file: Multipart File</span>
<span class="line">folder: Folder id</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get-media-detail" tabindex="-1"><a class="header-anchor" href="#get-media-detail"><span>Get media detail</span></a></h3><p><strong>URL:</strong> <code>/api/camomilla/media/&lt;media_id&gt;</code> <strong>METHOD:</strong> <code>GET</code></p><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;links&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;is_image&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;alt_text&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://mydomain.it/media/sample-image.jpg&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;thumbnail&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://mydomain.it/media/thumbnails/sample-image_thumb.jpg&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;created&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-24T13:47:26.986873Z&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token number">680313</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;mime_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;image/jpeg&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;image_props&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RGB&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;width&quot;</span><span class="token operator">:</span> <span class="token number">1980</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;JPEG&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">1319</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;folder&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="navigate-media-folders" tabindex="-1"><a class="header-anchor" href="#navigate-media-folders"><span>Navigate media folders</span></a></h3><p>To navigate media you need to navigate folder structure. In the main url you will get all media and all folders without a parent folder (root elements).</p><p><strong>URL:</strong> <code>/api/camomilla/media-folder</code> <strong>METHOD:</strong> <code>GET</code></p><p><strong>Response:</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;folders&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Folder 1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;slug&quot;</span><span class="token operator">:</span> <span class="token string">&quot;folder-1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;creation_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-31T15:17:37.612115Z&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;last_modified&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-31T15:17:37.612173Z&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/folder-1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;updir&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;media&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;items&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;is_image&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;alt_text&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://mydomain.com/media/sample-image.jpg&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;thumbnail&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://mydomain.com/media/thumbnails/sample-image_thumb.jpg&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;created&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-24T13:47:26.986873Z&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token number">680313</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;mime_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;image/jpeg&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;image_props&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token property">&quot;mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RGB&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token property">&quot;width&quot;</span><span class="token operator">:</span> <span class="token number">1980</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token property">&quot;format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;JPEG&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">1319</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;folder&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;paginator&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;page&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;has_next&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;has_previous&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;page_size&quot;</span><span class="token operator">:</span> <span class="token number">18</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;parent_folder&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;updir&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To navigate a subfolder just add its id to the url path:</p><p><strong>URL:</strong> <code>/api/camomilla/media-folder/&lt;folder_id&gt;</code> <strong>METHOD:</strong> <code>GET</code></p><p>The media endpoint response is always paginated. The pagination is made only for media elements. For subfolder you will get always all subfolder in a folder.</p>`,20))])}const b=t(r,[["render",m]]),g=JSON.parse('{"path":"/How%20to/Use%20Media/","title":"üñºÔ∏è Use Media","lang":"en-US","frontmatter":{},"git":{"updatedTime":1690904296000,"contributors":[{"name":"bnznamco","username":"bnznamco","email":"gabriele.baldi.01@gmail.com","commits":4,"url":"https://github.com/bnznamco"}],"changelog":[{"hash":"a2fc0cc1e3dde91f6cb9d27892f7682e277a8765","time":1690904296000,"email":"gabriele.baldi.01@gmail.com","author":"bnznamco","message":"docs: update media docs"},{"hash":"b9de34c3127ba17443ebaa86220fcc28d207d12b","time":1690817987000,"email":"gabriele.baldi.01@gmail.com","author":"bnznamco","message":"docs: update media docs"},{"hash":"fda7864b4979cf33ccaf9af256bda77f48eb82a8","time":1690803788000,"email":"gabriele.baldi.01@gmail.com","author":"bnznamco","message":"docs: update docs"},{"hash":"6dcaaf66d1dea2a89bda421c5928536ece96b9e8","time":1689849345000,"email":"gabriele.baldi.01@gmail.com","author":"bnznamco","message":"docs: update docs"}]},"filePathRelative":"How to/Use Media/README.md"}');export{b as comp,g as data};
