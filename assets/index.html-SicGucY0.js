import{_ as s,c as a,a as e,o as t}from"./app-B0iwjKd7.js";const o={};function l(p,n){return t(),a("div",null,[...n[0]||(n[0]=[e(`<h1 id="ðŸŽ­-use-modeltranslation" tabindex="-1"><a class="header-anchor" href="#ðŸŽ­-use-modeltranslation"><span>ðŸŽ­ Use Modeltranslation</span></a></h1><p>Camomilla comes with <a href="https://django-modeltranslation.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener noreferrer">django-modeltranslation</a> installed and configured. Modeltranslation is a django app that allows you to translate your models fields.</p><p>To use it, you need to add the <code>modeltranslation</code> app to your <code>INSTALLED_APPS</code> setting:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token comment"># &lt;project_name&gt;/settings.py</span></span>
<span class="line"></span>
<span class="line">INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    <span class="token string">&quot;modeltranslation&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ðŸª¡-register-your-models" tabindex="-1"><a class="header-anchor" href="#ðŸª¡-register-your-models"><span>ðŸª¡ Register your models</span></a></h2><p>To translate a model, you need to register in the <code>modeltranslation</code> registry. To register a model, you need to create a <code>translation.py</code> file in your django app folder and register your models there.</p><p>Let&#39;s see an example:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token comment"># &lt;project_name&gt;/&lt;app_name&gt;/translation.py</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">from</span> modeltranslation<span class="token punctuation">.</span>translator <span class="token keyword">import</span> translator<span class="token punctuation">,</span> TranslationOptions</span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> MyModel</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyModelTranslationOptions</span><span class="token punctuation">(</span>TranslationOptions<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">translator<span class="token punctuation">.</span>register<span class="token punctuation">(</span>MyModel<span class="token punctuation">,</span> MyModelTranslationOptions<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In this example we registered the <code>MyModel</code> model and we specified that we want to translate the <code>title</code> and <code>description</code> fields.</p><p>TranslationOptions fields can be inherited from other TranslationOptions, so you can create a base TranslationOptions class and inherit from it in your models TranslationOptions.</p><p>For models that inherit from camomilla AbstractPage, should use the <code>AbstractPageTranslationOptions</code> class, to inherit all needed fields to translate.</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token comment"># &lt;project_name&gt;/&lt;app_name&gt;/translation.py</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">from</span> modeltranslation<span class="token punctuation">.</span>translator <span class="token keyword">import</span> translator<span class="token punctuation">,</span> TranslationOptions</span>
<span class="line"><span class="token keyword">from</span> camomilla<span class="token punctuation">.</span>translation <span class="token keyword">import</span> AbstractPageTranslationOptions</span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>models <span class="token keyword">import</span> MyModel</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyModelTranslationOptions</span><span class="token punctuation">(</span>AbstractPageTranslationOptions<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">translator<span class="token punctuation">.</span>register<span class="token punctuation">(</span>MyModel<span class="token punctuation">,</span> MyModelTranslationOptions<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ðŸš¨-caveats-with-rest-framework" tabindex="-1"><a class="header-anchor" href="#ðŸš¨-caveats-with-rest-framework"><span>ðŸš¨ Caveats with Rest Framework</span></a></h2><p>If you are using <a href="https://www.django-rest-framework.org/" target="_blank" rel="noopener noreferrer">Django Rest Framework</a> you should always declare get_queryset in your viewsets, otherwise the statically declared queryset will not provide results in the requested language.</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token comment"># &lt;project_name&gt;/&lt;app_name&gt;/views.py</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> viewsets</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyModelViewSet</span><span class="token punctuation">(</span>viewsets<span class="token punctuation">.</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    queryset <span class="token operator">=</span> MyModel<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># this will not work</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> MyModel<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For more information about django-modeltranslation, please refer to the <a href="https://django-modeltranslation.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener noreferrer">official documentation</a>.</p>`,16)])])}const c=s(o,[["render",l]]),r=JSON.parse('{"path":"/How%20to/Use%20Modeltranslation/","title":"ðŸŽ­ Use Modeltranslation","lang":"en-US","frontmatter":{},"git":{"updatedTime":1696925660000,"contributors":[{"name":"bnznamco","username":"bnznamco","email":"gabriele.baldi.01@gmail.com","commits":2,"url":"https://github.com/bnznamco"}],"changelog":[{"hash":"53e511c074a54aeeaba9ee470e7c58239e2857f2","time":1696925660000,"email":"gabriele.baldi.01@gmail.com","author":"bnznamco","message":"docs: update docs emojis ðŸ˜ƒ"},{"hash":"a88da898131fef67e716ce40182c2f639b8365dd","time":1694270580000,"email":"gabriele.baldi.01@gmail.com","author":"bnznamco","message":"docs: update docs"}]},"filePathRelative":"How to/Use Modeltranslation/README.md"}');export{c as comp,r as data};
