<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìë</text></svg>"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css"><title>üìù Use Pages | Camomilla</title><meta name="description" content="Just playing around with flowers">
    <link rel="preload" href="/camomilla-core/assets/style-50ZPiQY3.css" as="style"><link rel="stylesheet" href="/camomilla-core/assets/style-50ZPiQY3.css">
    <link rel="modulepreload" href="/camomilla-core/assets/app-DQoAKara.js"><link rel="modulepreload" href="/camomilla-core/assets/index.html-DYVdMkdc.js">
    <link rel="prefetch" href="/camomilla-core/assets/index.html-DrrBgR0Y.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html-BR9ST8q4.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html-DuQx_R3t.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html-Bm6bOx_f.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html-B4u9IKx6.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html-Bn2I10Pr.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html-CNDjOyEZ.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html-CQbwBpn_.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html-BXKmLWlJ.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html-Cw661fr8.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html--gav9X3A.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html-BZ7e1mFF.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/index.html-B-bd4W7T.js" as="script"><link rel="prefetch" href="/camomilla-core/assets/404.html-8ttu9C_h.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/camomilla-core/"><img class="vp-site-logo" src="/camomilla-core/images/camomilla-short-logo.svg" alt="Camomilla"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Camomilla</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/camomilla-core/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/camomilla-core/QuickStart/" aria-label="QuickStart"><!--[--><!--[--><!--]--><!--]-->QuickStart<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/camomilla-core/How%20to/" aria-label="How to"><!--[--><!--[--><!--]--><!--]-->How to<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://camomilla.lotrek.io/" aria-label="Demo" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Demo<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/camomillacms/camomilla-core" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/camomilla-core/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/camomilla-core/QuickStart/" aria-label="QuickStart"><!--[--><!--[--><!--]--><!--]-->QuickStart<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/camomilla-core/How%20to/" aria-label="How to"><!--[--><!--[--><!--]--><!--]-->How to<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://camomilla.lotrek.io/" aria-label="Demo" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Demo<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/camomillacms/camomilla-core" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/camomilla-core/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/camomilla-core/QuickStart/" aria-label="QuickStart"><!--[--><!--[--><!--]--><!--]-->QuickStart<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active collapsible" href="/camomilla-core/How%20to/" aria-label="How to"><!--[--><!--[--><!--]--><!--]-->How to<!--[--><!--[--><span class="arrow down"></span><!--]--><!--]--></a><ul class="vp-sidebar-children" style=""><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/camomilla-core/How%20to/Use%20API/" aria-label="Use API"><!--[--><!--[--><!--]--><!--]-->Use API<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/camomilla-core/How%20to/Use%20Media/" aria-label="Use Media"><!--[--><!--[--><!--]--><!--]-->Use Media<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/camomilla-core/How%20to/Use%20Menu/" aria-label="Use Menu"><!--[--><!--[--><!--]--><!--]-->Use Menu<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/camomilla-core/How%20to/Use%20Modeltranslation/" aria-label="Use Modeltranslation"><!--[--><!--[--><!--]--><!--]-->Use Modeltranslation<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/camomilla-core/How%20to/Use%20Pages%20Context/" aria-label="Use Pages Context"><!--[--><!--[--><!--]--><!--]-->Use Pages Context<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/camomilla-core/How%20to/Use%20Pages/" aria-label="Use Pages"><!--[--><!--[--><!--]--><!--]-->Use Pages<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/camomilla-core/How%20to/Use%20Settings/" aria-label="Use Settings"><!--[--><!--[--><!--]--><!--]-->Use Settings<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/camomilla-core/How%20to/Use%20StructuredJSONField/" aria-label="Use StructuredJSONField"><!--[--><!--[--><!--]--><!--]-->Use StructuredJSONField<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/camomilla-core/Changelog/" aria-label="Changelog"><!--[--><!--[--><!--]--><!--]-->Changelog<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/camomilla-core/Contribute/" aria-label="Contribute"><!--[--><!--[--><!--]--><!--]-->Contribute<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/camomilla-core/License/" aria-label="License"><!--[--><!--[--><!--]--><!--]-->License<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="üìù-use-pages" tabindex="-1"><a class="header-anchor" href="#üìù-use-pages"><span>üìù Use Pages</span></a></h1><h2 id="üìé-the-page-model" tabindex="-1"><a class="header-anchor" href="#üìé-the-page-model"><span>üìé The Page Model</span></a></h2><p>Camomilla has it&#39;s own page model. The page model has an attribute for every relevant data in a web page. It takes care of SEO data and permalinks and template, and exposes jsonfields to manage additional data.</p><p>To use camomilla pages you need to add the dynamic url resolver at the end of your website urlpatterns:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token comment"># &lt;project_name&gt;/urls.py</span></span>
<span class="line">urlpatterns <span class="token operator">+=</span> path<span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">&quot;camomilla.dynamic_pages_urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>To handle multilanguage pages use:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token comment"># &lt;project_name&gt;/urls.py</span></span>
<span class="line">urlpatterns <span class="token operator">+=</span> i18n_patterns<span class="token punctuation">(</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">&quot;camomilla.dynamic_pages_urls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    prefix_default_language<span class="token operator">=</span><span class="token boolean">False</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This resolver is made to check any permalink that does not match anything in the url pattern and look in the database for a page with that permalink.</p><div class="hint-container warning"><p class="hint-container-title">‚ö†Ô∏è Beware!</p><p>The <code>dynamic_pages_urls</code> handler should always be the last handler of your urlpatterns list.</p></div><h3 id="choose-the-template" tabindex="-1"><a class="header-anchor" href="#choose-the-template"><span>Choose the template</span></a></h3><p>The page model has a field that determines which html template to use for rendering. The default value is <code>defaults/pages/default.html</code>. If a value is stored in this field it will be used. The rendering part is yelded by the default <a href="https://docs.djangoproject.com/en/4.2/topics/templates/" target="_blank" rel="noopener noreferrer">django template engine</a>. The default value can be changed with a setting:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token comment"># &lt;project_name&gt;/settings.py</span></span>
<span class="line">CAMOMILLA <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;RENDER&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;PAGE&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;DEFAULT_TEMPLATE&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;website/my_template.html&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="add-template-data" tabindex="-1"><a class="header-anchor" href="#add-template-data"><span>Add template data</span></a></h3><div class="hint-container warning"><p class="hint-container-title">‚ö†Ô∏è Beware!</p><p><a class="route-link" href="/camomilla-core/How%20to/Use%20Pages%20Context/">üß© Use Page Context</a> to inject context in a more safe way.</p></div><p>The data that will be available in the rendering engine should be saved in the template_data field. This field is a django JSONField. So it will accept any json structure. The data in this field will be accessible inside the template through <code>page.template_data</code>. If you need to enrich the template context with other data that are not stored in the template data you can provide an <code>inject_context</code> function in camomilla settings:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token comment"># &lt;project_name&gt;/settings.py</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># import from external file</span></span>
<span class="line"><span class="token keyword">from</span> my_project_app<span class="token punctuation">.</span>template_rendering <span class="token keyword">import</span> page_inject_context</span>
<span class="line"></span>
<span class="line"><span class="token comment"># or define explicitly in settings</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">page_inject_context</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> super_ctx<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">from</span> my_project_app<span class="token punctuation">.</span>models <span class="token keyword">import</span> Category</span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">&quot;all_categories&quot;</span><span class="token punctuation">:</span> Category<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment"># the all_category values will be accessible inside the template context.</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">CAMOMILLA <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;RENDER&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;PAGE&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">&quot;INJECT_CONTEXT&quot;</span><span class="token punctuation">:</span> page_inject_context <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="set-the-permalink" tabindex="-1"><a class="header-anchor" href="#set-the-permalink"><span>Set the permalink</span></a></h3><p>By default camomilla Page autogenerates it&#39;s permalink by slugification of the SEO title. If the page has a <code>parent_page</code> field and a page model associated with it, the permalink will be generated as a concatenation of the parent page permalink and the current page slug.</p><p>For example to generate the permalink <code>page_1/page_2</code> you will need to create 2 Pages, one with title <code>Page 1</code> and one with the title <code>Page 2</code> then set the first page as the parent page of the second and save it.</p><p>Otherwise, you can set the permalink manually by setting the <code>permalink</code> field. Manual permalink modification is available only if <code>autopermalink</code> field is set to <code>False</code>. While editing in django admin, if the user manually sets the permalink, the <code>autopermalink</code> field will be set to <code>False</code> automatically.</p><h2 id="üñáÔ∏è-the-abstractpage-model" tabindex="-1"><a class="header-anchor" href="#üñáÔ∏è-the-abstractpage-model"><span>üñáÔ∏è The AbstractPage Model</span></a></h2><p>Camomilla comes with an <code>AbstractPage</code> model. AbstractPage is different from Page model, it is Abstract. This means that the AbstractPage by itself does not create a database table. The only whay an AbstractPage can have its own db table is to be inherited by a concrete model like this:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> camomilla<span class="token punctuation">.</span>models <span class="token keyword">import</span> AbstractPage</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyPageModel</span><span class="token punctuation">(</span>AbstractPage<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ... custom logic there</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The AbstractPage contains all the logics of Page model. This means that you can override anything and define multiple custom page models. This is very usefull if you need to build complex sites, where you can have also other kid of data that need to be rendered and treated like a page (es. product, category, blog, anything..).</p><p>You can also define some intresting properties when you are defining your own page model.:</p><h3 id="define-page-options-with-pagemeta" tabindex="-1"><a class="header-anchor" href="#define-page-options-with-pagemeta"><span>Define page options with PageMeta</span></a></h3><p>Many &quot;settings&quot; of the page model are stored inside a <code>PageMeta</code> class like this:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> camomilla<span class="token punctuation">.</span>models <span class="token keyword">import</span> AbstractPage</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyPageModel</span><span class="token punctuation">(</span>AbstractPage<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">PageMeta</span><span class="token punctuation">:</span></span>
<span class="line">        parent_page_field <span class="token operator">=</span> <span class="token string">&quot;parent_page&quot;</span></span>
<span class="line">        default_template <span class="token operator">=</span> <span class="token string">&quot;website/my_template.html&quot;</span></span>
<span class="line">        <span class="token keyword">def</span> <span class="token function">inject_context_func</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> super_ctx<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">from</span> my_project_app<span class="token punctuation">.</span>models <span class="token keyword">import</span> Category</span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">&quot;all_categories&quot;</span><span class="token punctuation">:</span> Category<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>From PageMeta class you can define:</p><ul><li><code>parent_page_field</code> ==&gt; set a different propery to store page parent. Like <code>category</code> or anything else.</li><li><code>default_template</code> ==&gt; set a different default template.</li><li><code>inject_context_func</code> ==&gt; add more data inside template context</li></ul><div class="hint-container warning"><p class="hint-container-title">‚ö†Ô∏è Beware!</p><p><a class="route-link" href="/camomilla-core/How%20to/Use%20Pages%20Context/">üß© Use Page Context</a> to inject context in a more safe way.</p></div><h3 id="override-the-page-context" tabindex="-1"><a class="header-anchor" href="#override-the-page-context"><span>Override the page context</span></a></h3><p>This has almost the same functionality of <code>inject_context_func</code> PageMeta option but it runs at a more deep level. Overriding this will override the context and not only add things to it.</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> camomilla<span class="token punctuation">.</span>models <span class="token keyword">import</span> AbstractPage</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyPageModel</span><span class="token punctuation">(</span>AbstractPage<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get_context</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">from</span> my_project_app<span class="token punctuation">.</span>models <span class="token keyword">import</span> Category</span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span><span class="token punctuation">:</span> self<span class="token punctuation">,</span> <span class="token string">&quot;all_categories&quot;</span><span class="token punctuation">:</span> Category<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We suggest to always return <code>{ &quot;page&quot;: self }</code> in the context.</p><h2 id="üåê-build-a-sitemap-xml" tabindex="-1"><a class="header-anchor" href="#üåê-build-a-sitemap-xml"><span>üåê Build a sitemap.xml</span></a></h2><p>To build a sitemap.xml you can use the standard django sitemap framework. Camomilla comes with a <code>CamomillaPageSitemap</code> class that you can use to include camomilla pages in your sitemap.xml.</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token comment"># &lt;project_name&gt;/sitemap.py</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>sitemaps <span class="token keyword">import</span> Sitemap</span>
<span class="line"><span class="token keyword">from</span> camomilla<span class="token punctuation">.</span>sitemaps <span class="token keyword">import</span> CamomillaPageSitemap</span>
<span class="line"></span>
<span class="line"><span class="token comment"># declare your custom sitemaps</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">StaticViewSitemap</span><span class="token punctuation">(</span>Sitemap<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">items</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">&#39;home&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;about&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;contact&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">location</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span>item<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">sitemaps <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&#39;pages&#39;</span><span class="token punctuation">:</span> CamomillaPageSitemap<span class="token punctuation">,</span> <span class="token comment"># add the camomilla sitemap</span></span>
<span class="line">    <span class="token string">&#39;static&#39;</span><span class="token punctuation">:</span> StaticViewSitemap<span class="token punctuation">,</span> <span class="token comment"># add your custom sitemaps to the camomilla sitemaps</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token comment"># &lt;project_name&gt;/urls.py</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>sitemaps<span class="token punctuation">.</span>views <span class="token keyword">import</span> sitemap</span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>sitemap <span class="token keyword">import</span> sitemaps</span>
<span class="line"></span>
<span class="line">urlpatterns <span class="token operator">+=</span> <span class="token punctuation">[</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;sitemap.xml&#39;</span><span class="token punctuation">,</span> sitemap<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&#39;sitemaps&#39;</span><span class="token punctuation">:</span> sitemaps<span class="token punctuation">}</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">&#39;django.contrib.sitemaps.views.sitemap&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To customize the camomilla sitemap you can override the <code>CamomillaPageSitemap</code> class. Overriding this class will allow you to customize changefreq, priority and also items.</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">from</span> camomilla<span class="token punctuation">.</span>sitemaps <span class="token keyword">import</span> CamomillaPageSitemap</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyCamomillaPageSitemap</span><span class="token punctuation">(</span>CamomillaPageSitemap<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    changefreq <span class="token operator">=</span> <span class="token string">&quot;monthly&quot;</span></span>
<span class="line">    priority <span class="token operator">=</span> <span class="token number">0.5</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">items</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status<span class="token operator">=</span><span class="token string">&quot;PUB&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Remember that items is a queryset of <code>UrlNode</code> objects and to access the page model you need to use the <code>page</code> property of the <code>UrlNode</code> object.</p><h2 id="üóÇÔ∏è-pages-router-api-endpoint" tabindex="-1"><a class="header-anchor" href="#üóÇÔ∏è-pages-router-api-endpoint"><span>üóÇÔ∏è Pages router API endpoint</span></a></h2><div class="hint-container warning"><p class="hint-container-title">‚ö†Ô∏è Beware!</p><p>If you need to create an api endpoint for a model inheriting from the <code>AbstractPage</code> model remember to use inside the serializer the <code>AbstractPageMixin</code>.</p></div><p>Camomilla comes with a builtin pages router endpoint that allows you to browse your pages by url.</p><p><strong>URL Structure:</strong></p><ul><li><code>api/camomilla/pages-router/&lt;page_url&gt;</code></li></ul><p>You can provide as the page_url parameter the full url of the page without language prefix. The language you want to match against is taken from the request params. If no language is specified, the default language is used.</p><p>To specify the language in the request params you can use the <code>lang</code> parameter:</p><p><code>/api/camomilla/pages-router/&lt;page_url&gt;?lang=en</code></p><p>When you try to get a page from the url, the router will always take in to account the active language. If you are trying to get a page with a certain language, make sure to set the language in the request params. If the specified url is not present in current language, the router endpoint will return a 404 error.</p><p><strong>Simple Response:</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;is_public&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DRF&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;indexable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;alternates&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;it&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;en&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/en/&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;permalink&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;related_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;camomilla_page&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;breadcrumbs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;permalink&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;routerlink&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;template&quot;</span><span class="token operator">:</span> <span class="token string">&quot;website/home.html&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;og_description&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;og_title&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;og_type&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;og_url&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;canonical&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;meta&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;date_created&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-09-07T13:16:24.762269Z&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;date_updated_at&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-09-08T17:38:03.155480Z&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;breadcrumbs_title&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;slug&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;template_data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;identifier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4ee68c88-dd1a-4515-bf50-7839f2cf1e72&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;pubblication_date&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;ordering&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;og_image&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;url_node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">46</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;permalink&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;related_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;camomilla_page&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;parent_page&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The respose will not include field translations since the response has the content already translated in the active language. But if you need also some other language you can specify the <code>included_translations</code> parameter in the request.</p><p><code>/api/camomilla/pages-router/&lt;page_url&gt;?included_translations=it</code></p><p>The <code>included_translations</code> parameter accepts a comma separated list of languages or the value <code>all</code> to include all the translations.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><time class="meta-item-info" datetime="2024-11-27T15:26:04.000Z" data-allow-mismatch>11/27/24, 3:26 PM</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: gabriele.baldi.01@gmail.com">bnznamco</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/camomilla-core/How%20to/Use%20Pages%20Context/" aria-label="Use Pages Context"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">Use Pages Context</span></div><!--]--></a><a class="route-link auto-link next" href="/camomilla-core/How%20to/Use%20Settings/" aria-label="Use Settings"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">Use Settings</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/camomilla-core/assets/app-DQoAKara.js" defer></script>
  </body>
</html>
